{
  parserClass="dev.feedforward.parser.VimParser"

  extends="com.intellij.extapi.psi.ASTWrapperPsiElement"

  psiClassPrefix="Vim"
  psiImplClassSuffix="Impl"
  psiPackage="dev.feedforward.psi"
  psiImplPackage="dev.feedforward.psi.impl"

  elementTypeHolderClass="dev.feedforward.psi.VimTypes"
  elementTypeClass="dev.feedforward.psi.VimElementType"
  tokenTypeClass="dev.feedforward.psi.VimTokenType"

  tokens = [
      ANDAND             = '&&'
      OROR               = '||'

      ECHO = "echo"
      OPEN_QUOTE = '"'
      CLOSE_QUOTE = '"'
      STRING_LITERAL = 'regexp:("([^\"\\]|\\.)*")'

      space='regexp:\s+'
  ]

  extends(".*expr")=expr
}

vimFile ::= item_*

private item_ ::= (echo_command|COMMENT|CRLF)

echo_command ::= ECHO expr*


expr ::= logical_or_expr
       | logical_and_expr
       | literal_expr


logical_or_expr ::= expr '||' expr
logical_and_expr ::= expr '&&' expr
literal_expr ::= STRING_LITERAL
